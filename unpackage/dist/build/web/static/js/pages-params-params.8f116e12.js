(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-params-params"],{"01fc":function(t,e,a){var r=a("c86c");e=r(!1),e.push([t.i,"[data-v-49e4c6ac] ::-webkit-scrollbar{display:none;width:0;height:0}.params[data-v-49e4c6ac]{width:98%;height:560px;background-color:#fff;margin-top:10px;border-radius:10px;box-shadow:-2px 5px 10px #d0d2d6;padding:10px\n}",""]),t.exports=e},"4a33":function(t,e,a){"use strict";a.r(e);var r=a("4f14"),l=a("678d");for(var n in l)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return l[t]}))}(n);a("b97b");var s=a("828b"),i=Object(s["a"])(l["default"],r["b"],r["c"],!1,null,"49e4c6ac",null,!1,r["a"],void 0);e["default"]=i.exports},"4f14":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){}));var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"params"},[a("el-alert",{attrs:{title:"注意:只允许为第三级分类设置相关参数",type:"warning",closable:!1,"show-icon":!0}}),a("el-form",{staticStyle:{"margin-top":"10px"},attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"选择商品分类 :"}},[a("el-cascader",{staticStyle:{width:"300px"},attrs:{options:t.params,props:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"}},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.handleChange.apply(void 0,arguments)}},model:{value:t.param,callback:function(e){t.param=e},expression:"param"}})],1)],1),a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"first"}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addParams.apply(void 0,arguments)}}},[t._v("添加参数")]),a("el-dialog",{attrs:{title:"添加参数",visible:t.addParamsVisible},on:{"update:visible":function(e){arguments[0]=e=t.$handleEvent(e),t.addParamsVisible=e},close:function(e){arguments[0]=e=t.$handleEvent(e),t.empty.apply(void 0,arguments)}}},[a("el-form",{ref:"addAttrRef",attrs:{"label-width":"100px",model:t.addAttr,rules:t.addAttrRules}},[a("el-form-item",{attrs:{label:"参数名称 :",prop:"attr_name"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请设置参数名称"},model:{value:t.addAttr.attr_name,callback:function(e){t.$set(t.addAttr,"attr_name",e)},expression:"addAttr.attr_name"}})],1),a("el-form-item",{attrs:{label:"设置参数 :",prop:"attr_sel"}},[a("el-select",{attrs:{clearable:!0},model:{value:t.addAttr.attr_sel,callback:function(e){t.$set(t.addAttr,"attr_sel",e)},expression:"addAttr.attr_sel"}},[a("el-option",{attrs:{label:"静态参数",value:"only"}}),a("el-option",{attrs:{label:"动态参数",value:"many"}})],1)],1),a("el-form-item",{attrs:{label:"动态参数值 :"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"选择了动态参数可填"},model:{value:t.addAttr.attr_vals,callback:function(e){t.$set(t.addAttr,"attr_vals",e)},expression:"addAttr.attr_vals"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addParamsVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addAttrSure.apply(void 0,arguments)}}},[t._v("确定")])],1)],1),a("v-uni-scroll-view",{staticStyle:{height:"360px","margin-top":"10rpx"},attrs:{"scroll-y":"true","show-scrollbar":!0}},[a("el-table",{attrs:{data:t.paramsManyList,border:!0}},[a("el-table-column",{attrs:{type:"expand"}}),a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{content:"编辑",effect:"dark",placement:"top-end",enterable:!1}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.editParams(e)}}},[t._v("编辑")])],1),a("el-dialog",{attrs:{title:"编辑参数",visible:t.editAttrVisible},on:{"update:visible":function(e){arguments[0]=e=t.$handleEvent(e),t.editAttrVisible=e}}},[a("el-form",{ref:"editAttrRef",attrs:{model:t.editAttr,"label-width":"100px",rules:t.editAttrRules}},[a("el-form-item",{attrs:{label:"参数名称 :",prop:"attr_name"}},[a("el-input",{model:{value:t.editAttr.attr_name,callback:function(e){t.$set(t.editAttr,"attr_name",e)},expression:"editAttr.attr_name"}})],1),a("el-form-item",{attrs:{label:"参数类型 :",prop:"attr_sel"}},[a("el-select",{attrs:{clearable:!0},model:{value:t.editAttr.attr_sel,callback:function(e){t.$set(t.editAttr,"attr_sel",e)},expression:"editAttr.attr_sel"}},[a("el-option",{attrs:{label:"静态参数",value:"only"}}),a("el-option",{attrs:{label:"动态参数",value:"many"}})],1)],1),a("el-form-item",{attrs:{label:"动态参数值 :"}},[a("el-input",{model:{value:t.editAttr.attr_vals,callback:function(e){t.$set(t.editAttr,"attr_vals",e)},expression:"editAttr.attr_vals"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.editAttrVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.editAttrSure.apply(void 0,arguments)}}},[t._v("确定")])],1)],1),a("el-tooltip",{staticClass:"item",attrs:{content:"删除",effect:"dark",placement:"top-end",enterable:!1}},[a("el-popconfirm",{attrs:{title:"确定删除这个参数吗？"},on:{confirm:function(a){arguments[0]=a=t.$handleEvent(a),t.deleteAttr(e.row)}}},[a("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",icon:"el-icon-delete"},slot:"reference"},[t._v("删除")])],1)],1)]}}])})],1)],1)],1),a("el-tab-pane",{attrs:{label:"静态参数",name:"second"}},[a("v-uni-scroll-view",{staticStyle:{height:"390px","margin-top":"10rpx"},attrs:{"scroll-y":"true","show-scrollbar":!0}},[a("el-table",{attrs:{data:t.paramsOnlyList,border:!0}},[a("el-table-column",{attrs:{type:"expand"}}),a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{content:"编辑",effect:"dark",placement:"top-end",enterable:!1}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.editParams(e)}}},[t._v("编辑")])],1),a("el-dialog",{attrs:{title:"编辑参数",visible:t.editAttrVisible},on:{"update:visible":function(e){arguments[0]=e=t.$handleEvent(e),t.editAttrVisible=e}}},[a("el-form",{ref:"editAttrRef",attrs:{model:t.editAttr,"label-width":"100px",rules:t.editAttrRules}},[a("el-form-item",{attrs:{label:"参数名称 :",prop:"attr_name"}},[a("el-input",{model:{value:t.editAttr.attr_name,callback:function(e){t.$set(t.editAttr,"attr_name",e)},expression:"editAttr.attr_name"}})],1),a("el-form-item",{attrs:{label:"参数类型 :",prop:"attr_sel"}},[a("el-select",{attrs:{clearable:!0},model:{value:t.editAttr.attr_sel,callback:function(e){t.$set(t.editAttr,"attr_sel",e)},expression:"editAttr.attr_sel"}},[a("el-option",{attrs:{label:"静态参数",value:"only"}}),a("el-option",{attrs:{label:"动态参数",value:"many"}})],1)],1),a("el-form-item",{attrs:{label:"动态参数值 :"}},[a("el-input",{model:{value:t.editAttr.attr_vals,callback:function(e){t.$set(t.editAttr,"attr_vals",e)},expression:"editAttr.attr_vals"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.editAttrVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.editAttrSure.apply(void 0,arguments)}}},[t._v("确定")])],1)],1),a("el-tooltip",{staticClass:"item",attrs:{content:"删除",effect:"dark",placement:"top-end",enterable:!1}},[a("el-popconfirm",{attrs:{title:"确定删除这个参数吗？"},on:{confirm:function(a){arguments[0]=a=t.$handleEvent(a),t.deleteAttr(e.row)}}},[a("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",icon:"el-icon-delete"},slot:"reference"},[t._v("删除")])],1)],1)]}}])})],1)],1)],1)],1)],1)},l=[]},"678d":function(t,e,a){"use strict";a.r(e);var r=a("edc7"),l=a.n(r);for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);e["default"]=l.a},7251:function(t,e,a){var r=a("01fc");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var l=a("967d").default;l("29b29416",r,!0,{sourceMap:!1,shadowMode:!1})},b97b:function(t,e,a){"use strict";var r=a("7251"),l=a.n(r);l.a},edc7:function(t,e,a){"use strict";a("6a54");var r=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=r(a("2634")),n=r(a("2fdc"));a("d4b5"),a("c223");var s=a("fe49"),i={name:"params",data:function(){return{params:[],param:"",activeName:"first",paramsManyList:[],paramsOnlyList:[],addAttr:{attr_name:"",attr_sel:"",attr_vals:""},editAttr:{attr_name:"",attr_sel:"",attr_vals:"",attr_id:""},editAttrVisible:!1,addParamsVisible:!1,addAttrRules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}],attr_sel:[{required:!0,message:"请选择参数类型",trigger:"blur"}]},editAttrRules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}],attr_sel:[{required:!0,message:"请选择参数类型",trigger:"blur"}]}}},methods:{getCategories:function(){var t=this;(0,s.get)("categories",{type:3}).then((function(e){t.params=e.data}))},handleChange:function(){this.getParamsMany(),this.getParamsOnly()},getParamsMany:function(){var t=this;(0,s.get)("categories/"+this.param[this.param.length-1]+"/attributes",{sel:"many"}).then((function(e){t.paramsManyList=e.data,console.log(t.paramsManyList)}))},getParamsOnly:function(){var t=this;(0,s.get)("categories/"+this.param[this.param.length-1]+"/attributes",{sel:"only"}).then((function(e){t.paramsOnlyList=e.data,console.log(t.paramsOnlyList)}))},editParams:function(t){this.editAttr=JSON.parse(JSON.stringify(t.row)),this.editAttrVisible=!0},addParams:function(){3===this.param.length?this.addParamsVisible=!0:this.$message.error("选择的商品分类不为第三级，请更改")},addAttrSure:function(){var t=this;this.$refs.addAttrRef.validate(function(){var e=(0,n.default)((0,l.default)().mark((function e(a){var r,n;return(0,l.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=11;break}return r=t.param[2],e.next=4,(0,s.post)("categories/".concat(r,"/attributes"),t.addAttr);case 4:n=e.sent,console.log(n),200!==n.meta.status&&t.$message.error("添加参数失败"),t.$message.success("添加参数成功"),t.getParamsMany(),t.getParamsOnly(),t.addParamsVisible=!1;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},editAttrSure:function(){var t=this;this.$refs.editAttrRef.validate(function(){var e=(0,n.default)((0,l.default)().mark((function e(a){var r,n;return(0,l.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=13;break}return r=t.editAttr.cat_id,console.log(r,t.editAttr.attr_id),console.log(t.editAttr),e.next=6,(0,s.put)("categories/".concat(r,"/attributes/").concat(t.editAttr.attr_id),{attr_name:t.editAttr.attr_name,attr_sel:t.editAttr.attr_sel,attr_vals:t.editAttr.attr_vals});case 6:n=e.sent,console.log(n),200!==n.meta.status&&t.$message.error("编辑参数失败"),t.$message.success("编辑参数成功"),t.getParamsMany(),t.getParamsOnly(),t.editAttrVisible=!1;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},deleteAttr:function(t){var e=this;return(0,n.default)((0,l.default)().mark((function a(){var r;return(0,l.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(t),a.next=3,(0,s.del)("categories/".concat(t.cat_id,"/attributes/").concat(t.attr_id));case 3:r=a.sent,console.log(r),200!==r.meta.status&&e.$message.error("删除参数失败"),e.$message.success("删除参数成功"),e.getParamsMany(),e.getParamsOnly();case 9:case"end":return a.stop()}}),a)})))()},empty:function(){this.$refs.addAttrRef.resetFields(),this.addAttr.attr_vals=""}},created:function(){this.getCategories(),this.getParamsMany(),this.getParamsOnly()}};e.default=i},fe49:function(t,e,a){"use strict";a("6a54");var r=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.put=e.post=e.get=e.del=void 0,a("bf0f");var l=r(a("9ddc")),n=l.default.create({baseURL:"http://127.0.0.1:8000/api/private/v1",timeout:1e4,headers:{"Content-Type":"application/x-www-form-urlencoded"}});n.interceptors.request.use((function(t){return t.headers.Authorization=window.sessionStorage.getItem("token"),t}),(function(t){return Promise.reject(t)})),n.interceptors.response.use((function(t){return t.data}),(function(t){return Promise.reject(t)}));e.get=function(t,e){return n.get(t,{params:e})};e.post=function(t,e){return n.post(t,e)};e.put=function(t,e){return n.put(t,e)};e.del=function(t){return n.delete(t)}}}]);